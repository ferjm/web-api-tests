<button id="go">Go</button>
<select>
</select>
<script>
    let audio = document.createElement('audio');
    audio.src = 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3';
    audio.play();

    async function enumerateDevices() {
        await navigator.mediaDevices.getUserMedia({audio: true, video: true});
        const devices = await navigator.mediaDevices.enumerateDevices();
        const audioDevices = devices.filter(device => device.kind === 'audiooutput');
        const select = document.querySelectorAll('select')[0];
        audioDevices.forEach((device, i) => {
            const option = document.createElement('option');
            option.textContent = i;
            option.value = device.deviceId;
            select.appendChild(option);
        });
    }
    async function setSinkId() {
        const deviceId = document.querySelectorAll('select')[0].value;
        await audio.setSinkId(deviceId);
        console.log('Audio is being played on ' + audio.sinkId);
        //audio.play().catch(console.error);
    };
    window.addEventListener('DOMContentLoaded', () => {
        document.querySelectorAll('button')[0].addEventListener('click', enumerateDevices);
        document.querySelectorAll('select')[0].addEventListener('change', setSinkId);
    });
</script>
